{% extends '::crud_page.html.twig' %}

{% block content %}
    <div class="twelve wide column">
        {% if entity.dataType %}
            <h3 class="ui header">{{ "Существующие объекты типа для данных "|trans ~ ' "' ~ entity.name ~ '"' -}}</h3>
        {% else %}
            <h3 class="ui header">{{ "Существующие объекты типа"|trans ~ ' ' ~ entity.name }}</h3>
        {% endif %}
    {% if objects|length == 0 %}
            <div class="ui middle">
                <span>{{ "Нет таких"|trans }}</span>
            </div>
        {% else %}
            <div class="ui middle aligned recursive list">
                {{ block('object_list') }}
                {% set currentPageParams = masterParams|merge(pager.orderParams) %}
                {% include '@Builder/default/default.pager.html.twig' %}
            </div>
        {% endif %}
        <a class="ui left floated button primary"
           href="{{ path('builder_add_type_object', {'id':entity.id}) }}">{{ 'Создать обьект'|trans }}</a>
        <hr/>
        <a class="ui left floated button primary backward"
           href="{{ path('builder_add_types') }}">{{ 'Назад'|trans }}</a>
    </div>
{% endblock %}


{% block object_list %}
    {% if entity.dataType %}
        {% for pair in objects %}
            <div class="item">
                <div class="content">
                    {{ block('node_buttons_data_object') }}
                    <div class="ui dividing header">
                        {{ getMainFields(pair.object, false)|default('Обьект #'~pair.object.id) }}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        {% for pair in objects %}
            <div class="item">
                <div class="content">
                    {{ block('node_buttons_object') }}
                    <div class="ui dividing header">
                        {{ pair.object.name }}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endblock %}

{% block node_buttons_object %}
    <div class="child-left right floated ui icon buttons">
        <a class="tiny ui button"
           href="{{ path('vSingleObject',{'entityType': pair.object.entityType.slug, 'object':pair.object.slug}) }}"
           title="{{ 'Страница обьекта'|trans }}">
            <i class="external icon"></i></a>
        <a class="tiny ui button" href="{{ path('builder_edit_big_object',{'id': pair.object.id}) }}"
           title="{{ 'Редактировать'|trans }}">
            <i class="edit icon"></i></a>
        <a class="tiny ui button" href="{{ path('builder_delete_object',{'id':pair.object.id}) }}"
           title="{{ "Удалить обьект"|trans }}">
            <i class="remove circle icon"></i></a>
    </div>
{% endblock %}

{% block node_buttons_data_object %}
    <div class="child-left right floated ui icon buttons">
        <a class="tiny ui button" href="{{ path('builder_edit_object',{'id':pair.object.id}) }}"
           title="{{ 'Редактировать'|trans }}">
            <i class="edit icon"></i></a>
        <a class="tiny ui button" href="{{ path('builder_delete_object',{'id':pair.object.id}) }}"
           title="{{ "Удалить обьект"|trans }}">
            <i class="remove circle icon"></i></a>
    </div>
{% endblock %}